<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_account_vat_invoices" model="ir.ui.view">
            <field name="name">Account Vat Invoices</field>
            <field name="model">account.vat.invoices</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            <form string="Taxes Report with Invoices" version="7.0">
                <group col="4" colspan="4">
                    <separator string="Taxes Report" colspan="4"/>
                    <label colspan="4" nolabel="1" string="This menu prints a VAT declaration based on invoices or payments. Select one or several periods of the fiscal year. The information required for a tax declaration is automatically generated by OpenERP from invoices (or payments, in some countries). This data is updated in real time. That’s very useful because it enables you to preview at any time the tax that you owe at the start and end of the month or quarter."/>
                    <newline/>
                    <field name="chart_tax_id" widget='selection' required='1'/>
                    <field name="fiscalyear_id" required='1'/>
                    <field name="based_on"/>
                    <!--- <field name="based_on"/>--> <!-- the option based_on 'payment' is probably not fully compliant with what the users understand with that term. So, currently, it's seems better to remove it from the view to avoid further problems -->
                    <separator string="Periods"  colspan="4"/>
                    <field name="period_from"  domain="[('fiscalyear_id', '=', fiscalyear_id)]"/>
                    <field name="period_to" domain="[('fiscalyear_id', '=', fiscalyear_id)]"/>
                </group>
                <footer>
                    <button icon='gtk-cancel' special="cancel"  string="Cancel" />
                    <button name="create_vat" invisible="1" string="Print Tax Statement" colspan="1" type="object" icon="gtk-ok"/>
                    <button name="create_vat_odt" string="Print Tax Report" colspan="1" type="object" icon="gtk-ok"/>
                </footer>
            </form>
            </field>
        </record>

        <record id="action_account_vat_invoices" model="ir.actions.act_window">
            <field name="name">Account Vat Invoices</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">account.vat.invoices</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="help">This menu print a VAT declaration based on invoices or payments. You can select one or several periods of the fiscal year. Information required for a tax declaration is automatically generated by OpenERP from invoices (or payments, in some countries). This data is updated in real time. That’s very useful because it enables you to preview at any time the tax that you owe at the start and end of the month or quarter.</field>
        </record>

        <menuitem
            name="Taxes Report with Invoices"
            parent="account.menu_tax_report"
            action="action_account_vat_invoices"
            id="menu_account_vat_invoices"
            icon="STOCK_PRINT"/>

        <report
            auto="False"
            id="account_vat_invoices"
            menu="False"
            model="account.tax.code"
            name="account.vat.invoices"
            rml="z_account_vat_report/report/account_tax_report.rml"
            string="Taxes Report Detailed"
            header="False"
            />

    </data>
</openerp>
